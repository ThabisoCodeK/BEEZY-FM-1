<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Beezy FM - Radio Bathong</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=Space+Mono:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-image: url('image_643d5e.jpg'); /* Using the uploaded image */
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            background-attachment: fixed; /* Keeps background fixed when scrolling */
            margin: 0;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
            position: relative; /* Needed for pseudo-element positioning */
            overflow-y: auto; /* Allow scrolling if content is long */
        }

        /* Overlay for blur effect */
        body::before {
            content: "";
            position: fixed; /* Fixed to viewport */
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(255, 255, 255, 0.2); /* A slight white overlay for better text readability */
            backdrop-filter: blur(8px); /* Adjust blur strength as needed */
            -webkit-backdrop-filter: blur(8px); /* For Safari */
            z-index: -1; /* Place it behind content but above the background image */
        }

        header {
            background-color: rgba(0, 0, 0, 0.8); /* Black header with transparency */
            color: white;
            padding: 1rem 2rem;
            display: flex;
            align-items: center;
            justify-content: space-between;
            flex-wrap: wrap;
            position: sticky; /* Make header sticky */
            top: 0;
            z-index: 1000; /* Ensure it's above other content */
        }

        .header-left {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .station-logo {
            width: 60px; /* Smaller logo in header */
            height: 60px;
            object-fit: contain;
            border-radius: 50%; /* Make it circular */
            border: 2px solid yellow; /* Yellow border for the logo */
            box-shadow: 0 0 8px rgba(255, 255, 0, 0.5); /* Subtle yellow glow */
        }

        .station-info h1 {
            font-size: 1.8rem;
            font-weight: 700;
            color: yellow; /* Yellow for station name */
            margin-bottom: 0.25rem;
        }

        .station-info p {
            font-size: 0.9rem;
            color: #ccc; /* Lighter grey for slogan */
        }

        /* Desktop Navigation */
        nav ul {
            display: flex;
            gap: 1.5rem;
            list-style: none;
            padding: 0;
            margin: 0;
        }

        nav a {
            color: white;
            text-decoration: none;
            font-weight: 600;
            transition: color 0.3s ease;
        }

        nav a:hover {
            color: yellow;
        }

        .volume-control {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-left: 1.5rem;
        }

        /* Corrected CSS for range input */
        .volume-control input[type="range"] {
            width: 80px; /* Adjust as needed */
            -webkit-appearance: none;
            appearance: none;
            background: #4a5568; /* Darker grey for the track */
            outline: none;
            border-radius: 5px;
            height: 5px;
            cursor: pointer;
        }

        .volume-control input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 15px;
            height: 15px;
            border-radius: 50%;
            background: yellow;
            cursor: pointer;
            border: 1px solid #fff;
        }

        .volume-control input[type="range"]::-moz-range-thumb {
            width: 15px;
            height: 15px;
            border-radius: 50%;
            background: yellow;
            cursor: pointer;
            border: 1px solid #fff;
        }

        main {
            flex-grow: 1;
            display: flex;
            flex-direction: column; /* Allow content to stack */
            justify-content: flex-start; /* Align to top */
            align-items: center;
            padding: 2rem;
            gap: 2rem; /* Space between sections */
        }

        .container {
            background-color: rgba(240, 242, 245, 0.9); /* Slightly transparent white container */
            border-radius: 1rem;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            padding: 2.5rem;
            text-align: center;
            max-width: 90%;
            width: 500px; /* Default width for home section */
            position: relative;
            border: 1px solid #e2e8f0;
        }

        .show-time-at-top {
            font-size: 1.5rem;
            font-weight: 700;
            color: #000000;
            margin-bottom: 0.5rem;
        }

        .show-title {
            font-size: 2.25rem;
            font-weight: 700;
            color: #eab308; /* Tailwind yellow-500 for show title */
            margin-bottom: 0.75rem;
        }

        .presenter-info { /* New class for presenter and WhatsApp */
            font-size: 1.25rem;
            font-weight: 600;
            color: #4a5568; /* Tailwind gray-700 */
            margin-bottom: 0.5rem; /* Space between presenter and progress bar */
        }

        .whatsapp-line {
            font-size: 1rem; /* Smaller font for WhatsApp line */
            color: #25D366; /* WhatsApp green */
            font-weight: 600;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            margin-top: 0.5rem;
        }

        .whatsapp-icon {
            width: 20px; /* Size of WhatsApp icon */
            height: 20px;
            vertical-align: middle;
        }

        /* Modern Time Widget Styles */
        .modern-time-widget {
            background-color: rgba(0, 0, 0, 0.7); /* Dark, slightly transparent background */
            border-radius: 0.75rem; /* Rounded corners */
            padding: 1.2rem 1.5rem; /* Ample padding */
            margin-top: 2rem; /* Space from content above */
            display: flex; /* Use flexbox for stacking */
            flex-direction: column; /* Stack time and date */
            align-items: center; /* Center horizontally */
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.4); /* Deeper shadow */
            border: 1px solid rgba(255, 255, 255, 0.1); /* Subtle white border */
            max-width: fit-content; /* Shrink to fit content */
            margin-left: auto; /* Center the block */
            margin-right: auto; /* Center the block */
        }

        .digital-time {
            font-family: 'Space Mono', monospace; /* More digital-like font */
            font-size: 2.8rem; /* Larger font size */
            font-weight: 700;
            color: #00ff00; /* Neon green for a digital look */
            text-shadow: 0 0 10px #00ff00, 0 0 20px #00ff00; /* Glow effect */
            letter-spacing: 0.1em; /* Space out digits */
            margin-bottom: 0.5rem; /* Space between time and date */
            white-space: nowrap; /* Prevent wrapping */
        }

        .digital-date {
            font-family: 'Inter', sans-serif; /* Keep Inter for date, but slightly stylized */
            font-size: 1.1rem; /* Clear date font size */
            color: #a0aec0; /* Lighter grey for date */
            font-weight: 500;
            letter-spacing: 0.05em;
            white-space: nowrap; /* Prevent wrapping */
        }


        .progress-bar-container {
            width: 100%;
            background-color: #e2e8f0; /* Light grey background for empty bar */
            border-radius: 9999px;
            height: 0.75rem;
            margin-top: 2.5rem;
            overflow: visible;
            position: relative;
        }

        .progress-bar {
            height: 100%;
            background-color: yellow;
            border-radius: 9999px;
            width: 0%;
            transition: width 0.5s ease-in-out;
        }

        @keyframes flashRed {
            0%, 100% { color: #ef4444; }
            50% { color: #b91c1c; }
        }
        .flashing-on-air {
            animation: flashRed 1.15s infinite alternate;
        }

        .show-image-container {
            width: 200px;
            height: 200px;
            margin: 0 auto 1.5rem auto;
            position: relative;
            border-radius: 1rem;
            overflow: hidden;
            box-shadow: 0 0 0 0 rgba(255, 255, 0, 0.7);
            animation: pulseMagnetic 2s infinite ease-in-out;
        }

        .show-image {
            width: 100%;
            height: 100%;
            object-fit: cover;
            display: block;
        }

        @keyframes pulseMagnetic {
            0% { box-shadow: 0 0 0 0 rgba(255, 255, 0, 0.7); }
            70% { box-shadow: 0 0 0 10px rgba(0, 0, 0, 0); }
            100% { box-shadow: 0 0 0 0 rgba(255, 255, 0, 0); }
        }

        .time-label {
            position: absolute;
            top: -1.5rem;
            font-size: 0.75rem;
            color: #000000;
            font-weight: 600;
            white-space: nowrap;
        }
        .time-label.start { left: 0; }
        .time-label.end { right: 0; }

        .next-show-info {
            margin-top: 1.5rem;
            font-size: 1rem;
            color: #eab308; /* Yellow for next show */
            font-weight: 600;
        }
        .next-show-presenter {
            font-size: 0.9rem;
            color: #4a5568;
        }

        /* News Section Styles */
        #news-section {
            background-color: rgba(255, 255, 255, 0.9); /* Slightly transparent white background */
            border-radius: 1rem;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            padding: 2.5rem;
            max-width: 90%;
            width: 800px; /* Wider for news content */
            margin-top: 2rem;
            text-align: left; /* Align text left for readability */
            display: none; /* Hidden by default */
            border: 1px solid #e2e8f0;
        }

        #news-section h2 {
            font-size: 2rem;
            font-weight: 700;
            color: #000000;
            margin-bottom: 1.5rem;
            text-align: center;
        }

        .weather-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1.5rem;
            margin-top: 1.5rem;
        }

        .weather-card {
            background-color: rgba(248, 250, 252, 0.95); /* Slightly transparent light grey */
            border: 1px solid #e2e8f0;
            border-radius: 0.75rem;
            padding: 1.25rem;
            text-align: center;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05), 0 2px 4px -1px rgba(0, 0, 0, 0.03);
            transition: transform 0.2s ease-in-out;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .weather-card:hover {
            transform: translateY(-5px);
        }

        .weather-card h3 {
            font-size: 1.25rem;
            font-weight: 700;
            color: #1a202c;
            margin-bottom: 0.5rem;
        }

        .weather-card p {
            font-size: 1rem;
            color: #4a5568;
            margin-bottom: 0.25rem;
        }

        .weather-card .temp {
            font-size: 1.5rem;
            font-weight: 700;
            color: #eab308;
        }

        /* About Section Styles */
        #about-section {
            background-color: rgba(255, 255, 255, 0.9); /* Slightly transparent white background */
            border-radius: 1rem;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            padding: 2.5rem;
            max-width: 90%;
            width: 700px;
            margin-top: 2rem;
            text-align: center; /* Center content within the about card */
            display: none; /* Hidden by default */
            border: 1px solid #e2e8f0;
        }

        #about-section h2 {
            font-size: 2.5rem;
            font-weight: 700;
            color: #000000;
            margin-bottom: 1.5rem;
        }

        #about-section p, #about-section ul {
            font-size: 1.15rem;
            color: #333;
            line-height: 1.8;
            margin-bottom: 1rem;
        }

        #about-section ul {
            list-style: none; /* Remove default bullet points */
            padding: 0;
            margin: 1.5rem auto; /* Center the list */
            max-width: 400px; /* Limit width for better readability */
            text-align: left; /* Align list items to the left */
        }

        #about-section ul li {
            margin-bottom: 0.75rem;
            padding-left: 1.5rem;
            position: relative;
        }

        #about-section ul li:before {
            content: '⭐'; /* Custom bullet point */
            position: absolute;
            left: 0;
            color: yellow;
            font-size: 1.2em;
            line-height: 1;
        }

        .listener-count-display {
            font-size: 2.5rem;
            font-weight: 800;
            color: #eab308;
            margin-bottom: 1.5rem;
            display: block; /* Ensure it takes its own line */
        }
        .listener-count-label {
            font-size: 1.2rem;
            font-weight: 600;
            color: #4a5568;
            margin-bottom: 0.5rem;
            display: block;
        }

        /* Schedule Section Styles */
        #schedule-section {
            background-color: rgba(255, 255, 255, 0.9); /* Slightly transparent white background */
            border-radius: 1rem;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            padding: 2.5rem;
            max-width: 90%;
            width: 700px; /* Adjust width for schedule list */
            margin-top: 2rem;
            text-align: center;
            display: none; /* Hidden by default */
            border: 1px solid #e2e8f0;
        }

        #schedule-section h2 {
            font-size: 2rem;
            font-weight: 700;
            color: #000000;
            margin-bottom: 1.5rem;
        }

        /* Day Tabs for Schedule */
        .day-tabs {
            display: flex;
            justify-content: center;
            gap: 0.5rem;
            margin-bottom: 1.5rem;
            flex-wrap: wrap; /* Allow tabs to wrap on smaller screens */
        }

        .day-tabs button {
            background-color: #cbd5e0; /* light grey */
            color: #4a5568; /* dark grey text */
            padding: 0.5rem 1rem;
            border-radius: 0.5rem;
            font-weight: 600;
            cursor: pointer;
            transition: background-color 0.3s ease, color 0.3s ease;
            border: none;
            flex-shrink: 0; /* Prevent buttons from shrinking too much */
        }

        .day-tabs button:hover {
            background-color: #a0aec0; /* slightly darker grey */
            color: #1a202c;
        }

        .day-tabs button.active {
            background-color: #eab308; /* yellow */
            color: white;
            box-shadow: 0 2px 5px rgba(234, 179, 8, 0.4);
        }

        /* Horizontal Scrolling for Daily Schedules */
        .daily-schedules-container {
            overflow-x: hidden; /* Hide main container's scrollbar */
            position: relative; /* For potential future navigation arrows */
        }

        .schedule-day-shows {
            display: flex;
            overflow-x: scroll; /* Enable horizontal scrolling */
            scroll-snap-type: x mandatory; /* Snap to items */
            -webkit-overflow-scrolling: touch; /* Smooth scrolling on iOS */
            padding-bottom: 1rem; /* Space for scrollbar on some systems */
            white-space: nowrap; /* Prevent items from wrapping */
            gap: 1.5rem; /* Space between show entries */
            padding-left: 1.5rem; /* Padding for first item to not be at edge */
            padding-right: 1.5rem; /* Padding for last item */
        }

        /* Hide scrollbar for a cleaner look */
        .schedule-day-shows::-webkit-scrollbar {
            display: none; /* For Webkit browsers */
        }
        .schedule-day-shows {
            -ms-overflow-style: none;  /* For Internet Explorer and Edge */
            scrollbar-width: none;  /* For Firefox */
        }


        .schedule-entry {
            flex-shrink: 0; /* Prevent items from shrinking */
            width: 280px; /* Fixed width for each show card */
            scroll-snap-align: start; /* Snap to the start of each item */
            background-color: #f8fafc; /* Lightest grey background */
            border-radius: 0.75rem;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
            transition: transform 0.2s ease-in-out, background-color 0.2s ease-in-out;
            border: 1px solid #e2e8f0;
            padding: 1.5rem; /* Increased padding for better appearance */
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
        }

        .schedule-entry:hover {
            transform: translateY(-3px);
            background-color: #f0f4f8;
        }

        /* Keyframe animation for schedule entry flash */
        @keyframes flashScheduleEntry {
            0%, 100% {
                background-color: #fffbeb; /* light yellow */
                border-color: #fbbf24; /* amber */
                box-shadow: 0 4px 8px rgba(251, 191, 36, 0.2);
            }
            50% {
                background-color: #fcd34d; /* deeper yellow/amber */
                border-color: #eab308; /* even deeper yellow */
                box-shadow: 0 6px 12px rgba(251, 191, 36, 0.4);
            }
        }

        .live-show-highlight {
            animation: flashScheduleEntry 1.5s infinite alternate; /* Apply the new flashing animation */
        }

        .schedule-time {
            font-size: 1.1rem;
            font-weight: 700;
            color: #1a202c;
            margin-bottom: 0.75rem;
            padding-bottom: 0.5rem;
            border-bottom: 1px dashed #cbd5e0;
            width: 100%;
        }

        .schedule-details {
            display: flex;
            flex-direction: column;
            align-items: center;
            flex-grow: 1;
            margin-top: 0.5rem;
        }

        .schedule-entry-image {
            width: 80px; /* Larger image in horizontal view */
            height: 80px;
            object-fit: cover;
            border-radius: 0.75rem;
            border: 2px solid #ccc;
            margin-bottom: 0.75rem;
        }

        .schedule-entry-title {
            font-size: 1.25rem;
            font-weight: 700;
            color: #333;
            margin-bottom: 0.25rem;
            white-space: normal; /* Allow title to wrap */
        }

        .schedule-entry-presenter {
            font-size: 1rem;
            color: #666;
            white-space: normal; /* Allow presenter name to wrap */
        }


        footer {
            background-color: rgba(0, 0, 0, 0.8);
            color: #ccc;
            padding: 1.5rem 2rem;
            text-align: center;
            font-size: 0.85rem;
            margin-top: auto;
        }

        footer .social-links a {
            color: yellow;
            margin: 0 0.5rem;
            text-decoration: none;
            font-weight: 600;
        }


        /* --- Mobile Responsiveness Adjustments (max-width: 768px) --- */
        @media (max-width: 768px) {
            header {
                flex-direction: column; /* Stack header items vertically */
                align-items: flex-start; /* Align to start */
                padding: 1rem;
                gap: 1rem; /* Space between stacked header items */
                position: relative; /* For positioning hamburger button */
            }

            .header-left {
                width: 100%; /* Take full width */
                justify-content: center; /* Center logo and info */
                margin-bottom: 0.5rem; /* Space between logo/info and volume/nav toggle area */
            }

            .station-info {
                text-align: center;
            }

            .volume-control {
                margin-left: 0; /* Remove left margin */
                width: 100%; /* Take full width */
                justify-content: center; /* Center volume control */
                order: 3; /* Move volume control to bottom of header on mobile */
            }

            /* Hamburger menu button */
            .hamburger-menu {
                display: block; /* Show hamburger button on mobile */
                position: absolute; /* Position it absolutely in the header */
                right: 1rem;
                top: 1.5rem; /* Adjust positioning relative to header */
                background: none;
                border: none;
                cursor: pointer;
                z-index: 1001; /* Ensure it's above other content */
                padding: 0.5rem; /* Make it easier to tap */
            }
            .hamburger-menu span {
                display: block;
                background-color: white;
                height: 2px;
                width: 24px;
                margin-bottom: 4px;
                transition: transform 0.3s ease, opacity 0.3s ease;
            }
            .hamburger-menu span:last-child {
                margin-bottom: 0;
            }

            /* Hamburger animation to 'X' */
            .hamburger-menu.active span:nth-child(1) { transform: translateY(6px) rotate(45deg); }
            .hamburger-menu.active span:nth-child(2) { opacity: 0; }
            .hamburger-menu.active span:nth-child(3) { transform: translateY(-6px) rotate(-45deg); }


            /* Mobile Navigation */
            #main-nav {
                position: fixed; /* Overlay the content */
                top: 0;
                right: -100%; /* Start off-screen */
                width: 75%; /* Width of the menu */
                max-width: 300px; /* Limit max width for larger tablets in portrait */
                height: 100%;
                background-color: rgba(0, 0, 0, 0.95); /* Dark background for the menu */
                transition: right 0.3s ease-in-out;
                z-index: 999; /* Below hamburger, above content */
                padding-top: 6rem; /* Space for header items that are above the menu */
                box-shadow: -5px 0 15px rgba(0, 0, 0, 0.5);
            }

            #main-nav.active {
                right: 0; /* Slide in */
            }

            #main-nav ul {
                flex-direction: column; /* Stack nav items vertically */
                gap: 1.5rem; /* Space between nav items */
                align-items: flex-start; /* Align text to the left */
                padding: 1rem 2rem; /* Padding inside the nav menu */
                width: 100%;
            }

            #main-nav a {
                font-size: 1.2rem; /* Larger font for tap targets */
                display: block; /* Make the whole link tap-able */
                padding: 0.5rem 0;
                width: 100%;
                color: white; /* Ensure text color is visible on dark background */
            }

            /* Main content padding & container adjustments */
            main {
                padding: 1rem; /* Reduce main padding */
            }
            .container {
                padding: 1.5rem; /* Reduce padding on containers */
                width: 100%; /* Allow containers to take full width */
                max-width: 100%; /* Override max-width */
            }

            /* Home section specific adjustments */
            .show-time-at-top { font-size: 1.2rem; }
            .show-title { font-size: 1.8rem; }
            .presenter-info { font-size: 1rem; }
            .whatsapp-line { font-size: 0.9rem; }
            .show-image-container { width: 150px; height: 150px; } /* Smaller image */
            .time-display { font-size: 0.9rem; } /* This can be removed or ignored */
            .next-show-info { font-size: 0.95rem; }
            .next-show-presenter { font-size: 0.85rem; }

            /* Modern Time Widget Mobile */
            .modern-time-widget {
                padding: 1rem 1.2rem;
                margin-top: 1.5rem;
            }
            .digital-time {
                font-size: 2rem; /* Smaller on mobile */
                letter-spacing: 0.05em;
                text-shadow: 0 0 8px #00ff00, 0 0 15px #00ff00; /* Reduce glow for mobile */
            }
            .digital-date {
                font-size: 0.9rem; /* Smaller on mobile */
            }


            /* News section adjustments */
            #news-section h2 { font-size: 1.8rem; }
            .weather-card h3 { font-size: 1.1rem; }
            .weather-card p { font-size: 0.9rem; }
            .weather-card .temp { font-size: 1.3rem; }
            .weather-grid { gap: 1rem; } /* Slightly reduce gap in grid */
            .weather-card { padding: 1rem; }

            /* About section adjustments */
            #about-section h2 { font-size: 2rem; }
            #about-section p, #about-section ul { font-size: 1rem; }
            .listener-count-display { font-size: 2rem; }
            .listener-count-label { font-size: 1rem; }
            #about-section ul { margin: 1rem auto; max-width: none; } /* Adjust list for full width */


            /* Schedule specific mobile adjustments */
            .schedule-section h2 { font-size: 1.8rem; }
            .schedule-day-shows {
                padding-left: 0.75rem; /* Adjust horizontal padding to start closer to edge */
                padding-right: 0.75rem;
                gap: 1rem; /* Reduce gap between cards slightly */
            }

            .schedule-entry {
                width: 260px; /* Slightly smaller card width for very small screens */
                padding: 1rem; /* Reduce card padding */
            }
            .schedule-time {
                font-size: 1rem; /* Adjust font size */
            }
            .schedule-entry-image {
                width: 60px; /* Smaller image in schedule entry */
                height: 60px;
            }
            .schedule-entry-title {
                font-size: 1.1rem; /* Adjust font size */
            }
            .schedule-entry-presenter {
                font-size: 0.9rem; /* Adjust font size */
            }

            .day-tabs {
                gap: 0.3rem; /* Smaller gap for day buttons */
            }
            .day-tabs button {
                padding: 0.4rem 0.8rem; /* Smaller padding for buttons */
                font-size: 0.9rem; /* Slightly smaller font */
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="header-left">
            <img src="https://proxy.zeno.fm/content/stations/f0ccd091-d7e5-4939-98d8-52457d88ecd3/image/?u=1742924775000" alt="Beezy FM Logo" class="station-logo">
            <div class="station-info">
                <h1>Beezy FM</h1>
                <p>Radio Bathong</p>
            </div>
        </div>

        <button class="hamburger-menu" id="hamburger-button">
            <span></span>
            <span></span>
            <span></span>
        </button>

        <nav id="main-nav">
            <ul>
                <li><a href="#" onclick="showSection('home-section')">Home</a></li>
                <li><a href="#" onclick="showSection('news-section')">Beezy News</a></li>
                <li><a href="#" onclick="showSection('schedule-section')">Beezy Schedule</a></li>
                <li><a href="#" onclick="showSection('about-section')">About Us</a></li>
                <li><a href="#contact">Contact</a></li>
            </ul>
        </nav>

        <div class="volume-control">
            <label for="volume-slider" class="sr-only">Volume</label>
            <input type="range" id="volume-slider" min="0" max="1" step="0.01" value="0.5">
            <span id="volume-icon">🔊</span>
        </div>
    </header>

    <main>
        <div class="container" id="home-section">
            <h1 class="text-3xl md:text-4xl font-bold text-gray-800 mb-6 flashing-on-air">LIVE ON AIR</h1>
            <div id="show-info" class="p-6 bg-blue-50 border border-blue-200 rounded-lg shadow-md">
                <div class="show-image-container">
                    <img id="show-image" class="show-image" src="" alt="Show Image">
                </div>
                <p class="show-time-at-top" id="current-show-duration-display"></p>
                <p class="show-title" id="show-name">Loading Show...</p>
                <div class="presenter-info">
                    <p id="presenter-name"></p>
                    <p id="whatsapp-line" class="whatsapp-line" style="display: none;">
                        <img src="https://upload.wikimedia.org/wikipedia/commons/6/6b/WhatsApp.svg" alt="WhatsApp Icon" class="whatsapp-icon">
                        083 644 2822
                    </p>
                </div>
                <div class="progress-bar-container">
                    <div class="progress-bar" id="show-progress-bar"></div>
                    <span class="time-label start" id="show-elapsed-time-label"></span>
                    <span class="time-label end" id="show-total-duration-label"></span>
                </div>
                <p class="next-show-info" id="next-show-name"></p>
                <p class="next-show-presenter" id="next-show-presenter"></p>
            </div>

            <div class="modern-time-widget">
                <span id="current-time-val" class="digital-time"></span>
                <span id="current-date-val" class="digital-date"></span>
            </div>
        </div>

        <div id="news-section" class="container">
            <h2>Beezy News: Weather Updates</h2>
            <div class="weather-grid" id="weather-updates">
                <p>Loading weather data...</p>
            </div>
            <p class="time-display" id="news-last_updated"></p>
        </div>

        <div id="schedule-section" class="container">
            <h2>Beezy FM Broadcast Schedule</h2>
            <div id="day-tabs" class="day-tabs">
                </div>
            <div id="daily-schedules-container" class="daily-schedules-container">
                </div>
        </div>

        <div id="about-section" class="container">
            <h2>About Beezy FM</h2>
            <p class="listener-count-label">Our Growing Family:</p>
            <span id="listener-count" class="listener-count-display">0</span>
            <p>
                At Beezy FM, we are dedicated to bringing you the best in radio entertainment and information.
                We pride ourselves on our commitment to our listeners and our vibrant community.
            </p>
            <ul>
                <li>24/7 Broadcasting: Always on air, always for you.</li>
                <li>Engaging Content: Thought-provoking discussions and lively interactions.</li>
                <li>Great Music: A diverse selection to suit every mood.</li>
                <li>Experienced DJs: The best voices in the business to keep you entertained.</li>
                <li>Nominations: Recognized for our excellence in broadcasting.</li>
            </ul>
            <p>Thank you for making us your preferred station. Beezy FM Radio Bathong.</p>
        </div>
    </main>

    <footer>
        <p>&copy; 2025 Beezy FM. All rights reserved. Radio Bathong.</p>
        <div class="social-links">
            <a href="https://www.facebook.com/p/BEEZY-FM-61571015857551/" target="_blank">Facebook</a> |
            <a href="https://wa.me/0836442822" target="_blank">Whatsapp</a>
        </div>
    </footer>

    <audio id="radio-stream" src="https://stream.zeno.fm/f0ccd091-d7e5-4939-98d8-52457d88ecd3/audio" preload="none"></audio>

    <script>
        let intervalId;
        let listenerCountInterval; // Declare a variable for the listener count interval

        // --- Schedule Data ---
        const schedule = {
            // Sunday (0)
            sunday: [
                { start: { hour: 6, minute: 0 }, end: { hour: 9, minute: 0 }, name: "LOVE AFFAIRS", presenter: "DIBUSENG PELEHA" },
                { start: { hour: 9, minute: 0 }, end: { hour: 12, minute: 0 }, name: "EMMANUEL", presenter: "MONYANE MOKOENA" },
                { start: { hour: 12, minute: 0 }, end: { hour: 15, minute: 0 }, name: "IKETLE", presenter: "Nkunyana Nkunyana (Skuzabell)" },
                { start: { hour: 15, minute: 0 }, end: { hour: 18, minute: 0 }, name: "MAKODILO", presenter: "Hananious Motaung" },
                { start: {hour: 18, minute: 0}, end: {hour: 21, minute: 0}, name: "EBENHEZER", presenter:"Apostle Lerato Mokayane"},
                { start: {hour: 21, minute: 0}, end: {hour: 23, minute: 59, second: 59, nextDay: false }, name:"DIVINE WORSHIP", presenter:"Malesedi Mofokeng" },
                { start: { hour: 0, minute: 0 }, end: { hour: 6, minute: 0, nextDay: false }, name: "AUTOMATED PLAYLIST", presenter: "Automated Playlist" }
            ],
            // Monday to Friday (1-5)
            weekday: [
                { start: { hour: 6, minute: 0 }, end: { hour: 7, minute: 0 }, name: "THAHAMESO", presenter: "MASESI MOLABA" },
                { start: { hour: 7, minute: 0 }, end: { hour: 9, minute: 0 }, name: "MONAKALADI BREAKFAST SHOW", presenter: "JOHANNES LESIBA" },
                { start: { hour: 9, minute: 0 }, end: { hour: 12, minute: 0 }, name: "MAGNIFICENT MORNING", presenter: "PHELEKWA MPONO" },
                { start: { hour: 12, minute: 0 }, end: { hour: 15, minute: 0 }, name: "MATHULAHOHLE", presenter: "MPHO NTHEBE" },
                { start: { hour: 15, minute: 0 }, end: { hour: 18, minute: 0 }, name: "BEEZY DRIVE with Mo Simela", presenter: "MOHAU SEMELA" },
                { start: { hour: 18, minute: 0 }, end: { hour: 19, minute: 0 }, name: "MAMPODI", presenter: "MASILO MALAKOANE" },
                { start: { hour: 19, minute: 0 }, end: { hour: 20, minute: 0 }, name: "DINALEDI SPORTS SHOW", presenter: "MALEFETSANE MOREKI & MOJALEFA TSOTETSI" },
                { start: { hour: 20, minute: 0 }, end: { hour: 21, minute: 0 }, name: "NOTICE BOARD", presenter: "MOJALEFA ZIM" },
                { start: { hour: 21, minute: 0 }, end: { hour: 0, minute: 0, nextDay: true }, name: "CAMPUS CORNER", presenter: "JABULILE HLONGWANE" },
                { start: { hour: 0, minute: 0 }, end: { hour: 6, minute: 0, nextDay: false }, name: "Automated Playlist", presenter: "Automated Playlist" }
            ],
            // Saturday (6)
            saturday: [
                { start: { hour: 6, minute: 0 }, end: { hour: 9, minute: 0 }, name: "KA LAPENG", presenter: "MONYANE MOKOENA" },
                { start: { hour: 9, minute: 0 }, end: { hour: 12, minute: 0 }, name: "BEZZY FM TOP 30", presenter: "DJ INCUS THE ORIGINIAL" },
                { start: { hour: 12, minute: 0 }, end: { hour: 15, minute: 0 }, name: "IKETLE", presenter: "NKUNYANA NKUNYANA (SKUZABELL)" },
                { start: { hour: 15, minute: 0 }, end: { hour: 18, minute: 0 }, name: "BEZZY FM TOP 30", presenter: "DJ INCUS THE ORIGINIAL" },
                { start: { hour: 18, minute: 0 }, end: { hour: 6, minute: 0, nextDay: true }, name: "Saturday Night Chill", presenter: "Automated Playlist" }
            ]
        };
        // --- End Schedule Data ---

        const UNIVERSAL_IMAGE_URL = "https://proxy.zeno.fm/content/stations/f0ccd091-d7e5-4939-98d8-52457d88ecd3/image/?u=1742924775000";


        function updateRadioShow() {
            const now = new Date();
            const day = now.getDay();
            const currentHour = now.getHours(); // 0-23
            const currentMinute = now.getMinutes();

            const showNameElement = document.getElementById('show-name');
            const presenterNameElement = document.getElementById('presenter-name');
            const whatsappLineElement = document.getElementById('whatsapp-line'); // Get the WhatsApp element
            const showProgressBar = document.getElementById('show-progress-bar');
            const showImageElement = document.getElementById('show-image');
            const showElapsedTimeLabel = document.getElementById('show-elapsed-time-label');
            const showTotalDurationLabel = document.getElementById('show-total-duration-label');
            const nextShowNameElement = document.getElementById('next-show-name');
            const nextShowPresenterElement = document.getElementById('next-show-presenter');
            const currentShowDurationDisplay = document.getElementById('current-show-duration-display');

            // Modernized Time Display Updates
            const currentTimeValElement = document.getElementById('current-time-val');
            const currentDateValElement = document.getElementById('current-date-val');

            const formattedTime = now.toLocaleTimeString('en-ZA', { hour: '2-digit', minute: '2-digit', second: '2-digit', hour12: false });
            const formattedDate = now.toLocaleDateString('en-ZA', { weekday: 'short', month: 'short', day: 'numeric', year: 'numeric' });

            currentTimeValElement.textContent = formattedTime;
            currentDateValElement.textContent = formattedDate;

            let currentDaySchedule = [];
            if (day >= 1 && day <= 5) {
                currentDaySchedule = schedule.weekday;
            } else if (day === 0) {
                currentDaySchedule = schedule.sunday;
            } else if (day === 6) {
                currentDaySchedule = schedule.saturday;
            }

            let currentShow = null;
            let nextShow = null;
            let currentShowIndex = -1;

            for (let i = 0; i < currentDaySchedule.length; i++) {
                const show = currentDaySchedule[i];
                // Create Date objects for comparison
                const showStart = new Date(now.getFullYear(), now.getMonth(), now.getDate(), show.start.hour, show.start.minute, 0);
                let showEnd = new Date(now.getFullYear(), now.getMonth(), now.getDate(), show.end.hour, show.end.minute, 0);

                // Handle shows that end on the next day (e.g., overnight playlists)
                if (show.end.nextDay || show.start.hour > show.end.hour || (show.start.hour === show.end.hour && show.start.minute > show.end.minute)) {
                    // If the show starts on the previous day and crosses midnight into today
                    if (now < showStart && !(show.end.nextDay && now.getHours() < show.end.hour)) { // Adjusted logic for overnight
                        showStart.setDate(showStart.getDate() - 1);
                    }
                    showEnd.setDate(showEnd.getDate() + (show.end.nextDay ? 1 : 0));
                }

                if (now >= showStart && now < showEnd) {
                    currentShow = show;
                    currentShowIndex = i;
                    break;
                }
            }

            // --- Determine Next Show Logic ---
            if (currentShow) {
                // Determine the week of the month for presenter rotation
                const date = now.getDate();
                const weekOfMonth = Math.ceil(date / 7); // 1st, 2nd, 3rd, 4th, or 5th week

                // Apply presenter rotation for "DINALEDI SPORTS SHOW"
                if (currentShow.name === "DINALEDI SPORTS SHOW") {
                    if (weekOfMonth === 1 || weekOfMonth === 3) {
                        currentShow.presenter = "MALEFETSANE MOREKI";
                    } else { // weekOfMonth === 2, 4, or 5 (last week)
                        currentShow.presenter = "MOJALEFA TSOTETSI";
                    }
                }

                // If it's the last show of the current day's array OR it's an overnight show,
                // we *must* look at the next calendar day's schedule for the 'nextShow'.
                const isLastShowInArray = (currentShowIndex === currentDaySchedule.length - 1);

                if (isLastShowInArray || (currentShow.end.nextDay && currentShow.end.hour <= now.getHours())) { // Check if overnight show is ending soon
                    const nextDayDate = new Date(now);
                    nextDayDate.setDate(now.getDate() + 1); // Move to the next calendar day
                    const nextCalendarDayIndex = nextDayDate.getDay(); // Get the day index for the next calendar day

                    let nextDaySchedule = [];
                    if (nextCalendarDayIndex >= 1 && nextCalendarDayIndex <= 5) {
                        nextDaySchedule = schedule.weekday;
                    } else if (nextCalendarDayIndex === 0) {
                        nextDaySchedule = schedule.sunday;
                    } else if (nextCalendarDayIndex === 6) {
                        nextDaySchedule = schedule.saturday;
                    }

                    if (nextDaySchedule.length > 0) {
                        nextShow = nextDaySchedule[0]; // The first show of the next day's schedule
                    } else {
                        nextShow = null; // No schedule for the next day
                    }
                } else {
                    // It's not the last show, so the next show is simply the next one in the array
                    nextShow = currentDaySchedule[currentShowIndex + 1];
                }

                showNameElement.textContent = currentShow.name;
                presenterNameElement.textContent = currentShow.presenter ? `Presenter: ${currentShow.presenter}` : '';

                // Show WhatsApp line only if it's not an automated playlist
                if (currentShow.name !== "AUTOMATED PLAYLIST" && currentShow.name !== "Automated Playlist" && currentShow.name !== "Saturday Night Chill") {
                    whatsappLineElement.style.display = 'flex'; // Show the WhatsApp line
                } else {
                    whatsappLineElement.style.display = 'none'; // Hide if automated
                }


                const showStartDateForCalc = new Date(now.getFullYear(), now.getMonth(), now.getDate(), currentShow.start.hour, currentShow.start.minute, 0);
                let showEndDateForCalc = new Date(now.getFullYear(), now.getMonth(), now.getDate(), currentShow.end.hour, currentShow.end.minute, 0);

                // Re-evaluate overnight start date for calculation if current time implies it started yesterday
                if (currentShow.start.hour > currentShow.end.hour || (currentShow.start.hour === currentShow.end.hour && currentShow.start.minute > currentShow.minute)) {
                    if (now < showStartDateForCalc) {
                        showStartDateForCalc.setDate(showStartDateForCalc.getDate() - 1);
                    }
                }

                if (currentShow.end.nextDay) {
                    showEndDateForCalc.setDate(showEndDateForCalc.getDate() + 1);
                }

                const totalDurationMs = showEndDateForCalc.getTime() - showStartDateForCalc.getTime();
                const elapsedTimeMs = now.getTime() - showStartDateForCalc.getTime();

                const totalDurationSeconds = Math.floor(totalDurationMs / 1000);
                const elapsedSeconds = Math.floor(elapsedTimeMs / 1000);

                let progressPercentage = (elapsedTimeMs / totalDurationMs) * 100;
                if (progressPercentage < 0) progressPercentage = 0;
                if (progressPercentage > 100) progressPercentage = 100;

                showProgressBar.style.width = `${progressPercentage}%`;

                showElapsedTimeLabel.textContent = formatElapsedTime(elapsedSeconds);
                showTotalDurationLabel.textContent = formatElapsedTime(totalDurationSeconds);

                currentShowDurationDisplay.textContent = `${formatTimeAmPm(showStartDateForCalc.getHours(), showStartDateForCalc.getMinutes())} to ${formatTimeAmPm(showEndDateForCalc.getHours(), showEndDateForCalc.getMinutes())}`;
            } else {
                showNameElement.textContent = "Station Off Air";
                presenterNameElement.textContent = "";
                whatsappLineElement.style.display = 'none'; // Hide WhatsApp if off air
                showProgressBar.style.width = `0%`;
                showElapsedTimeLabel.textContent = "00:00:00";
                showTotalDurationLabel.textContent = "00:00:00";
                currentShowDurationDisplay.textContent = "Station Off Air";
                nextShow = null;
            }

            // Universal image URL for all shows
            showImageElement.src = UNIVERSAL_IMAGE_URL;
            showImageElement.onerror = () => {
                showImageElement.src = "https://placehold.co/200x200/CCCCCC/666666?text=ERROR";
            };
        }

        // --- Volume Control ---
        const radioStream = document.getElementById('radio-stream');
        const volumeSlider = document.getElementById('volume-slider');
        const volumeIcon = document.getElementById('volume-icon');

        volumeSlider.addEventListener('input', () => {
            radioStream.volume = volumeSlider.value;
            updateVolumeIcon(radioStream.volume);
        });

        // Initialize volume
        radioStream.volume = volumeSlider.value;
        updateVolumeIcon(radioStream.volume);

        function updateVolumeIcon(volume) {
            if (volume === 0) {
                volumeIcon.textContent = '🔇';
            } else if (volume < 0.5) {
                volumeIcon.textContent = '🔉';
            } else {
                volumeIcon.textContent = '🔊';
            }
        }

        // --- Section Visibility ---
        function showSection(sectionId) {
            document.getElementById('home-section').style.display = 'none';
            document.getElementById('news-section').style.display = 'none';
            document.getElementById('about-section').style.display = 'none';
            document.getElementById('schedule-section').style.display = 'none'; // Hide schedule section by default

            // Clear any existing listener count animation
            if (listenerCountInterval) {
                clearInterval(listenerCountInterval);
                listenerCountInterval = null;
            }

            // Show the requested section
            document.getElementById(sectionId).style.display = 'block';

            // Close mobile nav if open
            const mainNav = document.getElementById('main-nav');
            const hamburgerButton = document.getElementById('hamburger-button');
            if (mainNav.classList.contains('active')) {
                mainNav.classList.remove('active');
                hamburgerButton.classList.remove('active');
            }


            if (sectionId === 'news-section') {
                fetchWeatherUpdates(); // Fetch weather when news section is shown
            } else if (sectionId === 'about-section') {
                startListenerCountAnimation(); // Start animation when about section is shown
            } else if (sectionId === 'schedule-section') {
                generateSchedule(); // Regenerate schedule to ensure live status is updated
            }
        }

        // --- Dynamic Listener Count Animation ---
        let currentListenerCount = 0;
        const targetListenerCount = 69000;
        const animationDuration = 3000; // milliseconds
        const updateInterval = 50; // milliseconds
        const increment = Math.ceil((targetListenerCount / animationDuration) * updateInterval);

        function startListenerCountAnimation() {
            const listenerCountElement = document.getElementById('listener-count');
            currentListenerCount = 0; // Reset count every time the page is shown
            listenerCountElement.textContent = '0'; // Display 0 initially

            // Clear any existing interval before starting a new one
            if (listenerCountInterval) {
                clearInterval(listenerCountInterval);
            }

            listenerCountInterval = setInterval(() => {
                currentListenerCount += increment;
                if (currentListenerCount >= targetListenerCount) {
                    currentListenerCount = targetListenerCount;
                    clearInterval(listenerCountInterval);
                    listenerCountInterval = null;
                    listenerCountElement.textContent = currentListenerCount.toLocaleString() + '+'; // Add '+' here only when target is reached
                } else {
                    listenerCountElement.textContent = currentListenerCount.toLocaleString(); // No '+' during animation
                }
            }, updateInterval);
        }

        // --- Schedule Data for Horizontal Display ---
        const daysConfig = [
            { id: "mon-fri", label: "Mon-Fri", scheduleKey: "weekday", dayIndices: [1, 2, 3, 4, 5] },
            { id: "saturday", label: "Saturday", scheduleKey: "saturday", dayIndices: [6] },
            { id: "sunday", label: "Sunday", scheduleKey: "sunday", dayIndices: [0] }
        ];

        function generateSchedule() {
            const dayTabsContainer = document.getElementById('day-tabs');
            const dailySchedulesContainer = document.getElementById('daily-schedules-container');
            dayTabsContainer.innerHTML = ''; // Clear existing tabs
            dailySchedulesContainer.innerHTML = ''; // Clear existing schedule content

            const now = new Date();
            const currentDayIndex = now.getDay(); // 0 for Sunday, 1 for Monday, etc.
            let activeDayId = '';

            const formatTime24hr = (hour, minute) => {
                return `${String(hour).padStart(2, '0')}:${String(minute).padStart(2, '0')}`;
            };

            daysConfig.forEach(dayInfo => {
                // Create Day Tab Button
                const button = document.createElement('button');
                button.textContent = dayInfo.label;
                button.onclick = () => showDaySchedule(dayInfo.id);
                dayTabsContainer.appendChild(button);

                // Create Container for Day's Shows
                const dayShowsDiv = document.createElement('div');
                dayShowsDiv.id = `schedule-${dayInfo.id}`;
                dayShowsDiv.classList.add('schedule-day-shows');
                dayShowsDiv.style.display = 'none'; // Hidden by default

                const daySchedule = schedule[dayInfo.scheduleKey];
                if (daySchedule && daySchedule.length > 0) {
                    daySchedule.forEach(show => {
                        // Check if this show is currently live on the actual current day
                        const showStartToday = new Date(now.getFullYear(), now.getMonth(), now.getDate(), show.start.hour, show.start.minute, 0);
                        let showEndToday = new Date(now.getFullYear(), now.getMonth(), now.getDate(), show.end.hour, show.end.minute, 0);

                        if (show.end.nextDay || show.start.hour > show.end.hour || (show.start.hour === show.end.hour && show.start.minute > show.end.minute)) {
                            showEndToday.setDate(showEndToday.getDate() + 1);
                        }

                        const isLive = dayInfo.dayIndices.includes(currentDayIndex) && (now >= showStartToday && now < showEndToday);
                        const liveClass = isLive ? 'live-show-highlight' : '';

                        let presenterDisplay = show.presenter ? `<p class="schedule-entry-presenter">Presenter: ${show.presenter}</p>` : '';

                        dayShowsDiv.innerHTML += `
                            <div class="schedule-entry ${liveClass}">
                                <div class="schedule-time">
                                    ${formatTime24hr(show.start.hour, show.start.minute)} - ${formatTime24hr(show.end.hour, show.end.minute)}
                                </div>
                                <div class="schedule-details">
                                    <img src="${UNIVERSAL_IMAGE_URL}" alt="${show.name}" class="schedule-entry-image">
                                    <h4 class="schedule-entry-title">${show.name}</h4>
                                    ${presenterDisplay}
                                </div>
                            </div>
                        `;

                        if (isLive) {
                            activeDayId = dayInfo.id; // Set active day to the one with the live show
                        }
                    });
                } else {
                    dayShowsDiv.innerHTML = '<p class="text-center w-full py-4 text-gray-600">No shows scheduled for this day.</p>';
                }
                dailySchedulesContainer.appendChild(dayShowsDiv);
            });

            // If no live show is found (e.g., station off air), default to current day's schedule
            if (!activeDayId) {
                const todayConfig = daysConfig.find(d => d.dayIndices.includes(currentDayIndex));
                if (todayConfig) {
                    activeDayId = todayConfig.id;
                } else {
                    activeDayId = daysConfig[0].id; // Fallback to first day if no match (e.g., invalid day index)
                }
            }
            showDaySchedule(activeDayId);
        }

        function showDaySchedule(dayIdToShow) {
            // Hide all schedule day divs
            document.querySelectorAll('.schedule-day-shows').forEach(div => {
                div.style.display = 'none';
            });

            // Remove active class from all buttons
            document.querySelectorAll('.day-tabs button').forEach(button => {
                button.classList.remove('active');
            });

            // Show the selected day's schedule div
            const selectedDayDiv = document.getElementById(`schedule-${dayIdToShow}`);
            if (selectedDayDiv) {
                selectedDayDiv.style.display = 'flex'; // Use flex to maintain horizontal layout
                // Also scroll to the start of the currently live show if available
                const liveShow = selectedDayDiv.querySelector('.live-show-highlight');
                if (liveShow) {
                    liveShow.scrollIntoView({ behavior: 'smooth', inline: 'center' });
                }
            }

            // Add active class to the clicked button
            const activeTabButton = document.querySelector(`.day-tabs button[onclick="showDaySchedule('${dayIdToShow}')"]`);
            if (activeTabButton) {
                activeTabButton.classList.add('active');
            }
        }


        // --- Weather Data ---
        const saCities = [
            { name: "Johannesburg", lat: -26.2041, lon: 28.0473 },
            { name: "Cape Town", lat: -33.9249, lon: 18.4241 },
            { name: "Durban", lat: -29.8587, lon: 31.0218 },
            { name: "Pretoria", lat: -25.7479, lon: 28.2293 },
            { name: "Gqeberha", lat: -33.9610, lon: 25.6150 }, // Formerly Port Elizabeth
            { name: "Bloemfontein", lat: -29.1167, lon: 26.2167 },
            { name: "East London", lat: -33.0178, lon: 27.9116 },
            { name: "Nelspruit", lat: -25.4776, lon: 30.9893 }, // Mbombela
            { name: "Polokwane", lat: -23.9045, lon: 29.4674 },
            { name: "Kimberley", lat: -28.7383, lon: 24.7639 },
            { name: "Pietermaritzburg", lat: -29.6167, lon: 30.3833 },
            { name: "Rustenburg", lat: -25.6589, lon: 27.2407 },
            { name: "George", lat: -33.9610, lon: 22.4604 },
            { name: "Mthatha", lat: -31.5786, lon: 28.7905 },
            { name: "Upington", lat: -28.4500, lon: 21.2500 },
            { name: "Welkom", lat: -27.9715, lon: 26.7329 },
            { name: "Richards Bay", lat: -28.7833, lon: 32.0333 },
            { name: "Mafikeng", lat: -25.8667, lon: 25.6667 }, // Mahikeng
            { name: "Thohoyandou", lat: -22.9467, lon: 30.4700 },
            { name: "Port Shepstone", lat: -30.7333, lon: 30.4500 },
            { name: "Mossel Bay", lat: -34.1833, lon: 22.1333 },
            { name: "Worcester", lat: -33.6500, lon: 19.4500 },
            { name: "Queenstown", lat: -31.9000, lon: 26.8833 }, // Komani
            { name: "Springbok", lat: -29.6667, lon: 17.8833 },
            { name: "Saldanha", lat: -32.9933, lon: 17.9450 },
            { name: "Langebaan", lat: -33.0800, lon: 18.0400 }
        ];

        const weatherCodeMap = {
            0: "Clear sky", 1: "Mainly clear", 2: "Partly cloudy", 3: "Overcast",
            45: "Fog", 48: "Depositing rime fog",
            51: "Drizzle: Light", 53: "Drizzle: Moderate", 55: "Drizzle: Dense intensity",
            56: "Freezing Drizzle: Light", 57: "Freezing Drizzle: Dense intensity",
            61: "Rain: Slight", 63: "Rain: Moderate", 65: "Rain: Heavy intensity",
            66: "Freezing Rain: Light", 67: "Freezing Rain: Heavy intensity",
            71: "Snow fall: Slight", 73: "Snow fall: Moderate", 75: "Snow fall: Heavy intensity",
            77: "Snow grains",
            80: "Rain showers: Slight", 81: "Rain showers: Moderate", 82: "Rain showers: Violent",
            85: "Snow showers: Slight", 86: "Snow showers: Heavy",
            95: "Thunderstorm: Slight or moderate", 96: "Thunderstorm with slight hail", 99: "Thunderstorm with heavy hail"
        };

        async function fetchWeatherUpdates() {
            const weatherContainer = document.getElementById('weather-updates');
            weatherContainer.innerHTML = '<p>Fetching weather data...</p>';
            const newsLastUpdated = document.getElementById('news-last_updated');

            try {
                let weatherHtml = '';
                for (const city of saCities) {
                    const url = `https://api.open-meteo.com/v1/forecast?latitude=${city.lat}&longitude=${city.lon}&current=temperature_2m,relative_humidity_2m,wind_speed_10m,weather_code&timezone=auto`;
                    const response = await fetch(url);
                    if (!response.ok) {
                        throw new Error(`HTTP error! status: ${response.status} for ${city.name}`);
                    }
                    const data = await response.json();

                    const current = data.current;
                    const temperature = current.temperature_2m;
                    const humidity = current.relative_humidity_2m;
                    const windSpeed = current.wind_speed_10m;
                    const weatherCode = current.weather_code;
                    const weatherDescription = weatherCodeMap[weatherCode] || "N/A";

                    weatherHtml += `
                        <div class="weather-card">
                            <h3>${city.name}</h3>
                            <p>${weatherDescription}</p>
                            <p class="temp">${Math.round(temperature)}°C</p>
                            <p>Humidity: ${humidity}%</p>
                            <p>Wind: ${Math.round(windSpeed)} m/s</p>
                        </div>
                    `;
                }
                weatherContainer.innerHTML = weatherHtml;
                newsLastUpdated.textContent = `Weather data last updated: ${new Date().toLocaleTimeString('en-ZA')}`;
            } catch (error) {
                console.error("Error fetching weather data:", error);
                weatherContainer.innerHTML = `<p class="text-red-500">Failed to load weather data. Please try again later. Error: ${error.message}</p>`;
                newsLastUpdated.textContent = '';
            }
        }

        // --- Mobile Nav Toggle Logic ---
        const hamburgerButton = document.getElementById('hamburger-button');
        const mainNav = document.getElementById('main-nav');
        const navLinks = mainNav.querySelectorAll('a');

        hamburgerButton.addEventListener('click', () => {
            mainNav.classList.toggle('active');
            hamburgerButton.classList.toggle('active'); // For the X animation
        });

        navLinks.forEach(link => {
            link.addEventListener('click', () => {
                mainNav.classList.remove('active');
                hamburgerButton.classList.remove('active');
            });
        });


        document.addEventListener('DOMContentLoaded', () => {
            updateRadioShow();
            intervalId = setInterval(updateRadioShow, 1000);

            showSection('home-section'); // Display home section by default

            // Fetch weather updates initially and then every 10 minutes
            fetchWeatherUpdates();
            setInterval(fetchWeatherUpdates, 600000);

            // Generate schedule when the DOM is loaded
            generateSchedule();
        });
    </script>
</body>
</html>
